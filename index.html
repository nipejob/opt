
<!doctype html>
<html lang="da">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Nikolaj ‚Äì Aktie forberedelsesskema (mobilkompakt)</title>

<style>
:root{
  /* Farver */
  --bg:#f2f3f5;
  --panel:#ffffff;
  --text:#1f2937;
  --muted:#6b7280;

  --green:#2e7d32;    /* Ja */
  --red:#e53935;      /* Nej */
  --yellow:#f9a825;   /* Ved ikke */
  --blue:#1565c0;     /* Tjek */
  --accent:#ef6c00;   /* Overskrift/accent */

  /* Kompakt skala */
  --radius:12px;
  --pad:12px;
  --gap:8px;
  --font:15px;
  --font-small:13px;
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background:var(--bg);
  color:var(--text);
  font-size:var(--font);
  -webkit-tap-highlight-color: transparent;
}

.container{
  max-width:900px;
  margin:18px auto 80px;
  padding:0 12px;
}

.section{
  background:var(--panel);
  border-radius:var(--radius);
  padding:var(--pad);
  margin-bottom:14px;
  box-shadow:0 8px 18px rgba(0,0,0,.06);
}

h1,h2{ margin:0 0 6px; }
.sub{ color:var(--muted); margin:0 0 6px; font-size:var(--font-small); }

/* Topv√¶rkt√∏jer (tema) */
.tools{
  display:flex; align-items:center; gap:10px; flex-wrap:wrap;
}
.select{
  appearance:none;
  background:#fff;
  border:1px solid #d1d5db;
  border-radius:10px;
  padding:6px 10px;
  font-weight:600;
  font-size:var(--font-small);
}

/* Sp√∏rgsm√•lsliste ‚Äì kompakt */
.question{
  border:1px solid #e5e7eb;
  border-radius:10px;
  background:#fafafa;
  padding:10px;
  margin-top:8px;
  display:grid;
  grid-template-columns: 1fr auto;
  gap:8px;
}
.question.correct{ border:2px solid var(--green); background:#e8f5e9; }
.question.wrong{   border:2px solid var(--red);   background:#fdecea; }

.q-left{ display:flex; gap:8px; align-items:flex-start; }
.q-num{
  width:26px; height:26px; border-radius:6px;
  background:#bbdefb; color:#0f172a; font-weight:800;
  display:flex; align-items:center; justify-content:center;
  flex:0 0 auto; font-size:13px; margin-top:1px;
}
.q-icon{
  width:26px; height:26px; border-radius:6px;
  background:#fff; border:1px solid #e5e7eb;
  display:flex; align-items:center; justify-content:center;
  flex:0 0 auto; user-select:none; font-size:16px; margin-top:1px;
}
.q-text{ line-height:1.3; }

/* Knapper ‚Äì kompakt og finger-venlige */
.actions{ display:flex; gap:6px; flex-wrap:wrap; justify-content:flex-end; }
.btn{
  border:none; border-radius:9px; padding:6px 10px;
  font-weight:800; cursor:pointer; font-size:14px;
  box-shadow:0 1px 6px rgba(0,0,0,.07);
  min-height:34px;
}
.btn:active{ transform:translateY(1px); }

.yes{ background:var(--green); color:#fff; }
.no{  background:var(--red);   color:#fff; }
.unk{ background:var(--yellow); color:#111; }
.check{ background:var(--blue); color:#fff; }

/* Endeligt banner */
#final-banner{ display:none; margin-top:12px; }
#final-banner .inner{
  padding:16px;
  border-radius:16px;
  background:linear-gradient(135deg,#2e7d32,#66bb6a);
  color:#fff; text-align:center;
  font-size:1.2rem; font-weight:900;
  box-shadow:0 12px 28px rgba(0,0,0,.25);
}

/* PDF-panel kompakt */
.form-row{
  display:flex; gap:8px; flex-wrap:wrap; align-items:flex-end;
}
.input{
  padding:8px 10px; border-radius:10px; border:1px solid #d1d5db;
  font-size:14px; min-width:160px;
}
label{ font-size:12px; color:#374151; font-weight:700; }

/* iPhone-tilpasning */
@media (max-width:480px){
  :root{
    --pad:10px;
    --gap:6px;
    --font:14px;
    --font-small:12px;
  }
  .question{ grid-template-columns: 1fr; }
  .actions{ justify-content:flex-start; }
  .btn{ padding:6px 9px; font-size:13px; min-height:32px; }
  .q-num,.q-icon{ width:24px; height:24px; font-size:14px; }
}
</style>
</head>

<body>
<div class="container">

  <!-- Kontrolbar -->
  <div class="section">
    <h1>üß† Aktie‚Äëcheckliste f√∏r k√∏b</h1>
    <p class="sub">Nikolaj ‚Äì Forberedelsesskema (mobilkompakt)</p>
    <div class="tools">
      <label for="theme" class="sub" style="font-weight:800">Ikon‚Äëtema</label>
      <select id="theme" class="select" aria-label="V√¶lg ikon-tema">
        <option value="penge">üí∞ Penge</option>
        <option value="frugt">üçé Frugter</option>
      </select>
      <button id="resetAll" class="btn" style="background:#fff;border:1px solid #e5e7eb;color:#111;">Nulstil alle</button>
    </div>
  </div>

  <!-- Sp√∏rgsm√•l -->
  <div id="questions" class="section"></div>

  <!-- PDF-eksport -->
  <div class="section">
    <h2>üìÑ PDF‚Äëeksport</h2>
    <div class="form-row" style="margin-top:6px">
      <div>
        <label for="pdf-firma">Firma</label><br>
        <input id="pdf-firma" class="input" placeholder="Fx Novo Nordisk">
      </div>
      <div>
        <label for="pdf-kurs">Kurs</label><br>
        <input id="pdf-kurs" class="input" placeholder="Fx 945,50">
      </div>
      <button id="btn-pdf" class="btn check">‚¨á Download PDF</button>
    </div>
    <p class="sub" style="margin-top:6px">Dato inds√¶ttes automatisk. PDF‚Äôen indeholder alle sp√∏rgsm√•l, dine svar og endelig vurdering.</p>
  </div>

  <!-- OKAY-banner -->
  <div id="final-banner" class="section">
    <div class="inner">
      ‚úÖ OKAY TIL K√òB / SLAG
      <div style="font-size:.95rem;font-weight:600;margin-top:6px">
        Alle 21 punkter er korrekt vurderet
      </div>
    </div>
  </div>

</div>

<!-- jsPDF til PDF-eksport -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" integrity="sha512-Na8B1T0oz3oGLp8e3dQwhb34bG1z1AlmOvqN6YV9J7mX1y9vXYlYcJjvQO6xD9rY0k9sOfpVv+v8HkCzXW4F3g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script>
/* -------- Data -------- */
const QUESTIONS = [
 "Handler jeg ud fra min strategi ‚Äì og ikke mit hum√∏r?",
 "Er det ikke fredag, eller har jeg en meget god grund?",
 "Har jeg klart defineret indgangs- og udgangskurs?",
 "Findes der bedre alternativer end slagk√∏b (fx delk√∏b/DCA)?",
 "Kan k√∏bet vente, eller er det reelt bare FOMO?",
 "Er det en udbytteaktie, og passer det til min strategi?",
 "Er kursbev√¶gelsen baseret p√• reel udvikling ‚Äì ikke kun en nyhed?",
 "Matcher casen det overordnede forl√∏b / trend?",
 "Er aktien handlet i EUR?",
 "Er den handlet i DKK, SEK eller NOK?",
 "Er det en A- eller B-aktie, og har jeg taget h√∏jde for forskellen?",
 "Passer positionens st√∏rrelse til min portef√∏lje",
 "Har jeg allerede for h√∏j eksponering mod samme sektor eller tema?",
 "Er likviditeten h√∏j nok til, at jeg kan komme ud uden problemer?",
 "Hvad er mit konkrete exit-scenarie, hvis jeg tager fejl?",
 "Er der en kommende begivenhed, jeg reelt gambler p√• (regnskab, rente, dom, FDA, guidance)?",
 "Hvad er det v√¶rste realistiske scenarie ‚Äì og kan jeg leve med det?",
 "Er casen stadig gyldig, hvis markedet falder 5‚Äì10 %?",
 "K√∏ber jeg pga. andres overbevisning ‚Äì eller min egen analyse?",
 "Hvis jeg ikke ejede aktien i dag ‚Äì ville jeg s√• k√∏be den nu?",
 "Er alle oplysninger korrekt udfyldt og dobbelttjekket?"
];

const ANSWER_KEY = [
 'yes','yes','yes','unk','no',
 'yes','yes','yes','no','yes',
 'yes','yes','no','yes','unk',
 'no','yes','yes','yes','yes','yes'
];

/* Ikon-temaer */
const ICONS = {
  penge: ['üí∞','üìà','ü™ô','üíπ','üè¶','üíµ','üí≥','üìä','üßæ','üíº','üìâ','üí∏','üèõÔ∏è','üí±','üßÆ','üîç','üõ°Ô∏è','‚úÖ','üìà','üí∞','üí≥','üíπ','üíµ','üè¶'],
  frugt: ['üçé','üçê','üçä','üçã','üçå','üçâ','üçá','üçì','ü´ê','üçí','üçç','ü•ù','üçë','ü•≠','üçà','üçè','üçé','üçá','üçì','üçç','üçä','üçí','üçã','üçê']
};
let currentTheme = 'penge';

/* State */
const answers = new Array(QUESTIONS.length).fill(null);

/* -------- Rendering -------- */
const listHost = document.getElementById('questions');

function iconFor(idx){
  const set = ICONS[currentTheme] || ICONS.penge;
  return set[idx % set.length];
}

function renderList(){
  listHost.innerHTML = '';
  QUESTIONS.forEach((text, i)=>{
    const el = document.createElement('div');
    el.className = 'question';
    el.dataset.index = i;

    el.innerHTML = `
      <div class="q-left">
        <div class="q-num">${i+1}</div>
        <div class="q-icon" data-icon="${i}">${iconFor(i)}</div>
        <div class="q-text">${text}</div>
      </div>
      <div class="actions">
        <button class="btn yes"  aria-label="Svar ja">Ja</button>
        <button class="btn no"   aria-label="Svar nej">Nej</button>
        <button class="btn unk"  aria-label="Svar ved ikke">Ved ikke</button>
        <button class="btn check" aria-label="Tjek svar">Tjek</button>
      </div>
    `;

    const [bYes, bNo, bUnk, bCheck] = el.querySelectorAll('button');
    bYes.onclick  = ()=>{ answers[i]='yes'; el.classList.remove('correct','wrong'); };
    bNo.onclick   = ()=>{ answers[i]='no';  el.classList.remove('correct','wrong'); };
    bUnk.onclick  = ()=>{ answers[i]='unk'; el.classList.remove('correct','wrong'); };

    bCheck.onclick = ()=>{
      if(!answers[i]) { alert('Svar f√∏rst'); return; }
      el.classList.remove('correct','wrong');
      el.classList.add(answers[i]===ANSWER_KEY[i] ? 'correct' : 'wrong');
      updateFinalBanner();
    };

    listHost.appendChild(el);
  });
}

/* Tema-v√¶lger */
const themeSel = document.getElementById('theme');
themeSel.addEventListener('change', ()=>{
  currentTheme = themeSel.value;
  document.querySelectorAll('[data-icon]').forEach(icon=>{
    const idx = Number(icon.getAttribute('data-icon'));
    icon.textContent = iconFor(idx);
  });
});

/* Nulstil */
document.getElementById('resetAll').addEventListener('click', ()=>{
  answers.fill(null);
  document.querySelectorAll('.question').forEach(q=>{
    q.classList.remove('correct','wrong');
  });
  document.getElementById('final-banner').style.display='none';
});

/* OKAY-banner */
function updateFinalBanner(){
  const ok = answers.every((a,i)=> a && a===ANSWER_KEY[i]);
  document.getElementById('final-banner').style.display = ok ? 'block' : 'none';
}

/* -------- PDF-eksport -------- */
document.getElementById('btn-pdf').addEventListener('click', exportPDF);

function exportPDF(){
  // Kr√¶v godkendt checklist
  const ok = answers.every((a,i)=> a && a===ANSWER_KEY[i]);
  if(!ok){ alert('Checklist skal v√¶re fuldt godkendt (alle korrekt) f√∏r eksport.'); return; }

  const firma = document.getElementById('pdf-firma').value.trim();
  const kurs  = document.getElementById('pdf-kurs').value.trim();
  if(!firma || !kurs){ alert('Udfyld b√•de Firma og Kurs.'); return; }

  const isoDate = new Date().toISOString().slice(0,10); // YYYY-MM-DD
  const daDate  = new Date().toLocaleDateString('da-DK');

  const { jsPDF } = window.jspdf;
  const doc = new jsPDF({ unit:'mm', format:'a4' });

  const margin = 14;
  let y = margin;

  doc.setFont('helvetica','bold'); doc.setFontSize(16);
  doc.text('Aktie ‚Äì Forberedelsesskema', margin, y);
  y += 8;

  doc.setFont('helvetica','normal'); doc.setFontSize(11);
  doc.text(`Firma: ${firma}`, margin, y); y += 6;
  doc.text(`Kurs: ${kurs}`, margin, y);  y += 6;
  doc.text(`Dato: ${daDate}`, margin, y); y += 8;

  doc.setFont('helvetica','bold'); doc.text('Resultat:', margin, y); y += 6;
  doc.setFont('helvetica','normal');
  doc.text('‚úÖ OKAY TIL K√òB / SLAG', margin, y); y += 8;

  doc.setFont('helvetica','bold'); doc.text('Checkliste:', margin, y); y += 6;
  doc.setFont('helvetica','normal');

  const pageHeight = doc.internal.pageSize.getHeight();

  for(let i=0;i<QUESTIONS.length;i++){
    const qNum = `${i+1}. `;
    const qTxt = QUESTIONS[i];
    const aLbl = answers[i]==='yes' ? 'Ja' : answers[i]==='no' ? 'Nej' : 'Ved ikke';
    const correct = answers[i]===ANSWER_KEY[i];
    const mark = correct ? '‚úÖ' : '‚ùå';

    // Wrap sp√∏rgsm√•l
    const maxWidth = doc.internal.pageSize.getWidth() - margin*2;
    const linesQ = doc.splitTextToSize(qNum + qTxt, maxWidth);
    const linesA = [`Svar: ${aLbl}  ${mark}`];

    const blockHeight = linesQ.length*5 + linesA.length*5 + 4;

    if(y + blockHeight > pageHeight - margin){
      doc.addPage();
      y = margin;
    }

    doc.text(linesQ, margin, y); y += linesQ.length*5;
    doc.text(linesA, margin, y); y += linesA.length*5 + 4;
  }

  const safeName = firma.replace(/[^A-Za-z0-9_-]+/g,'_').replace(/_+/g,'_');
  const filename = `${isoDate}_${safeName}_Forberedelsesskema.pdf`;
  doc.save(filename);
}

/* Init */
renderList();
updateFinalBanner();
</script>
</body>
</html>
``
